# txt

A simple web page for text copy and paste, with a CLI tool.  
一个简单的纯文本复制黏贴网站 + 一个命令行工具

## txt 是什么? (Features)

### 无图形界面的纯命令行“云剪贴板”

txt 最大的特色是支持纯命令行，方便在终端上使用。比如有以下命令：

- `txt` 列出最近 5 条消息
- `txt list -n 3` 列出最近 3 条消息（条数与起始位置都可以指定）
- `txt get [alias]` 通过别名或流水号获取一条消息 (复制到本地剪贴板，同时打印到屏幕)
- `txt send [message]` 发送消息到云端 (在服务器保存一条字符串)
- `txt search [keyword]` 查找消息

由于 txt 的消息（字符串）保存在服务器上，因此不管电脑、手机还是通过 ssh 登录服务器，都可以收发消息。电脑和手机可以通过访问网页版来收发消息。

### Alias (别名)

- 使用命令 `txt get t1` 可获取第一条暂存消息，其中 't1' 改为 't2' 可获取第二条消息，依此类推。暂存消息上限 100 条（可自定义），超过上限自动删除旧消息（这类似于大多数剪贴板工具的行为）。
- 使用命令 `txt toggle t1` 可把 't1' 转换成 'p1', 以 'p' 开头的流水号表示永久消息。永久消息没有上限，不会被自动删除。使用命令 `txt get p1` 可获取第一条永久消息。
- 除了如上所示通过流水号指定消息外，每条消息还可以设置一个别名。例如，假设有一条消息的内容是自己的邮箱地址，设置了别名 'email', 则随时可以通过任何终端执行 `txt get email` 来获取该消息（复制到剪贴板，同时打印到屏幕）。
- 别名功能非常好用，常用命令、常用网址、邮箱地址、手机号码、信用卡号，都可以记录在云端，即使更换设备，也可以随时获取。

### Search (查找)

除了通过流水号或别名来精确获取消息外，还可以查找消息。例如 `txt search hello` 可以查找全部包含 'hello' 的消息。

### 更多可能性

- 本软件区分主密码与日常操作密钥（以下简称“密钥”），因此命令行工具设置好密钥后，日常操作过程中无需输入密码，非常方便。
- 密钥默认有效期 30 天（可自定义），因此，在便利的基础上，还有一定的安全性。输入主密码可生成新的密钥。
- 后端每个 api 均接受密钥，在 post 表单时，表单内包含密钥即可。基于这个设计，iOS 的“快捷指令”与 Windows 的 AutoHotkey 等均可以比较简单地兼顾安全与便利（一般单一密码登录，密码不会过期，安全性低；如果要处理 cookie 又比较麻烦）。

### 丰富的自定义功能

密钥的有效期、每条消息的长度上限、暂存消息的条数上限、每页显示消息条数上限、时区、数据库（kv）文件保存文件夹等，均可自定义。

### 后端 pure Go

后端使用 Go 语言，数据库也是采用 pure Go 的 kv 数据库，因此编译速度快，跨平台交叉编译容易。同时采用 Go embed 把前端的静态资源也打包到二进制文件里，因此后端只需要下载一个可执行文件，绿色免安装，直接执行即可。


## Install (安装)

直接下载一个文件，绿色免安装，通过点击或命令行启动程序即可使用。(下载 ➡ [Releases](https://github.com/ahui2016/txt/releases))

### Linux 安装

在上面给出的 Releases 页面下载压缩文件 txt_linux_amd64.tar.gz, 使用命令 `tar -xvf txt_linux_amd64.tar.gz` 解压缩后得到文件 txt_linux_amd64, 使用 `chmod +x txt_linux_amd64` 添加执行权限，然后就可以执行：

```sh
$ ./txt_linux_amd64
```

### MacOS 安装

在上面给出的 Releases 页面下载压缩文件 txt_MacOS 开头的文件，解压缩后得到一个文件，参考上面 Linux 的方法使用 chmod 命令添加执行权限。由于安全原因，正常方法无法执行文件，可按住 control 同时点击文件，选择打开即可。

### 本地访问

默认端口是 8000, 启动程序后用浏览器访问 http://127.0.0.1:8000 即可打开程序界面。

可使用 `-addr` 参数修改端口，例如:

```sh
txt.exe -addr 127.0.0.1:8080
```

### 数据库

本软件采用 boltDB, 默认保存在 [os.UserConfigDir](https://pkg.go.dev/os#UserConfigDir), 可使用参数 `-db` 指定数据库的文件夹(必须是一个已存在的文件夹)，例如:

```sh
$ mkdir txt-db-folder
$ txt -db ./txt-db-folder
```

### demo (在线演示)

https://txt-demo.ai42.xyz (密码:abc)

### txt-cli (安装命令行工具)

执行以下命令即可：

```sh
pip install txtcli
```

txt-cli 的详细安装及使用说明请看 https://github.com/ahui2016/txt-cli
